[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "オペレーションズ・リサーチ",
    "section": "",
    "text": "Preface\nORを学ぶための教科書です．",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#注意点",
    "href": "index.html#注意点",
    "title": "オペレーションズ・リサーチ",
    "section": "注意点",
    "text": "注意点\n随時更新していきますので，読む際は必ずブラウザをリロードしてください．",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#python",
    "href": "index.html#python",
    "title": "オペレーションズ・リサーチ",
    "section": "Python",
    "text": "Python\nすべてのモデル，アルゴリズムについて，Pythonでの実装例を示します．講義では Python プログラミングについては扱いませんが，Pythonの基礎的な知識があると理解が深まります．\n以下の手順で，教材に掲載されているコードを Google Colab 上で簡単に実行できます．ぜひ試してみてください．\n\nGoogle アカウントにログインする\nGoogle Colab にアクセスする\n「+新しいノート」をクリックする\nコードをコピーして，セルに貼り付ける\nセルを実行する",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#フィードバック",
    "href": "index.html#フィードバック",
    "title": "オペレーションズ・リサーチ",
    "section": "フィードバック",
    "text": "フィードバック\n継続的に改善していきますので，誤字脱字，内容の不備，わかりにくい箇所などを見つけたら，劉子昂までご連絡ください．",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "index.html#内容",
    "href": "index.html#内容",
    "title": "オペレーションズ・リサーチ",
    "section": "内容",
    "text": "内容\n\n\n\n回\n内容\n\n\n\n\n1\nガイダンス\n\n\n2\n在庫モデル：EOQモデル\n\n\n3\n在庫モデル：新聞売り子問題\n\n\n4\n在庫モデル：安全在庫\n\n\n5\nAHP\n\n\n6\nPERT 1\n\n\n7\nPERT 2\n\n\n8\nPERT 3\n\n\n9\n包絡分析法\n\n\n10\n動的計画法\n\n\n11\n待ち行列 1\n\n\n12\n待ち行列 2\n\n\n13\n待ち行列 3",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "course-info.html",
    "href": "course-info.html",
    "title": "講義",
    "section": "",
    "text": "講義情報\n本授業では、オペレーションズ・リサーチ（OR）の中の代表的な手法であるPERT、在庫理論、待ち行列理論、動的計画法、階層分析法、及び包絡分析法の数理を理解し、具体的な問題への応用を学ぶ。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#講義情報",
    "href": "course-info.html#講義情報",
    "title": "講義",
    "section": "",
    "text": "講義名：オペレーションズ・リサーチB\n曜日：水曜日\n時限：2時限目（10:50～12:30）\n教室：西館 W202\n担当教員：劉 子昂\nGoogle Classroom: Link",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#出席",
    "href": "course-info.html#出席",
    "title": "講義",
    "section": "出席",
    "text": "出席\n不定期に出席を取ります。\n出席は WebClass 上で取ります。以下の時間に注意してください。\n\n出席扱い : 10:50 - 11:09\n遅刻扱い : 11:10 - 11:29\n欠席扱い : 11:30 -",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#成績評価",
    "href": "course-info.html#成績評価",
    "title": "講義",
    "section": "成績評価",
    "text": "成績評価\n\n期末試験（100%）\n4回以上の欠席は単位取得不可。\n講義中の加点問題に正解した場合、試験の点数に加点します。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#到達目標",
    "href": "course-info.html#到達目標",
    "title": "講義",
    "section": "到達目標",
    "text": "到達目標\n各分野について、下記の事項を目標して講義を行う。\n\nPERTの計算と解析方法を理解し、プロジェクトの評価を行うことができる。\n在庫モデルを理解し、自分で式を構築及び解析することができる。\n待ち行列理論の重要な式や定理を理論的に導出し、それらを適切に解釈することができる。\n動的計画法の基本的な考え方を理解し、簡単な問題への適用ができる。\n階層分析法による意思決定の手法を理解し、一対比較行列からウェイトと整合性を計算することができる。\n包絡分析法におけるCCRモデルを理解し、得られた結果を解釈することができる。\n\nさらに、これらの手法を用いて比較的簡単な現象をモデル化し、解析することができる。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#orは重要",
    "href": "course-info.html#orは重要",
    "title": "講義",
    "section": "ORは重要",
    "text": "ORは重要\n経営工学において、最も重要な学問分野の一つ。\n日本経営工学会によると、「解決すべき課題の数理モデルを構築し、最適な手法を求めるオペレーションズ・リサーチ（OR）という分野は、経営工学の主要なテーマとなっています」。\n海外では、管理科学（Management Science）とORは同義語として使われることもよくある。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#orの全体像",
    "href": "course-info.html#orの全体像",
    "title": "講義",
    "section": "ORの全体像",
    "text": "ORの全体像\n\n線形計画法\n整数計画法\n非線形計画法\n動的計画法\nグラフ理論・ネットワーク\nシミュレーション\n在庫モデル\n待ち行列\n多基準意思決定分析\nプロジェクトマネジメント\n…",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#orは難しい",
    "href": "course-info.html#orは難しい",
    "title": "講義",
    "section": "ORは難しい？",
    "text": "ORは難しい？\n\n基礎知識が必要\n微分積分、線形代数、確率、統計の基礎知識が必要です。これらの基礎が不十分な場合、授業についていけないです。基礎知識が不十分な場合、必ず復習してください。\nこの講義では、以下の工夫をしています。\n\n付録に必要な基礎知識のまとめがあります。随時更新しますので、参考にしてください。\n講義資料には例題、図、演習問題を多く用意しています。\nプログラミングの実装例も示します。\n\n\n\n数式が多い\nORは、問題を数理的にモデル化し、解析する学問です。数式をたくさん使い、証明も多いです。数式を読むのが苦手な人は、慣れるまで大変かもしれません。\nこの講義では、以下の工夫をしています。\n\n証明は省略なく丁寧に行います。\nわかりにくいところをコラムで補足します。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#何を学ぶ",
    "href": "course-info.html#何を学ぶ",
    "title": "講義",
    "section": "何を学ぶ？",
    "text": "何を学ぶ？\n\n\nモデル：現実の問題を数理的に表現したもの\nモデリング：現実の問題を数理モデルで表現すること\n解：問題の答え\n最適化：最適解を見つけること\nアルゴリズム：問題を解く手順\n\n単に，結論・定理を覚えるだけでなく，モデリング，証明，アルゴリズムの理解が重要です。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#python-について",
    "href": "course-info.html#python-について",
    "title": "講義",
    "section": "Python について",
    "text": "Python について\n\nすべてのアルゴリズム、モデルをPythonで実装します。\nPython の基礎については、この講義では説明しません。\nPython のコードを理解できなくても、授業内容の理解には支障ありません。\nYoutube などでは、2-3時間で Python 入門の動画がたくさんあります。事前に学習しておくことをお勧めします。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#授業時間外の学習",
    "href": "course-info.html#授業時間外の学習",
    "title": "講義",
    "section": "授業時間外の学習",
    "text": "授業時間外の学習\n本授業の準備・復習等の授業時間外学習は、4時間を標準とする",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#私語",
    "href": "course-info.html#私語",
    "title": "講義",
    "section": "私語",
    "text": "私語\n\n講義中の私語は厳禁です．\n注意してもやめない場合は、減点を行います。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#学生による授業改善アンケート",
    "href": "course-info.html#学生による授業改善アンケート",
    "title": "講義",
    "section": "学生による授業改善アンケート",
    "text": "学生による授業改善アンケート\n第14回の授業中に，以下のURLからアクセスして，授業改善アンケートに回答してください．\n学生による授業改善アンケート\n\nこのアンケートの目的は、授業の内容と方法を向上させることにあります。授業は学生のみなさんと教員とが協力してこそ、実り多いものとなります。\n回答内容が成績評価に影響することはありません。教員は回答の集計結果と自由記述回答のみを確認します。みなさんの学生証番号と個人名が担当教員に知られることはありません。\n責任のある回答にご協力ください。\nアクセスしにくい場合は、授業時間外でご回答ください。\nアンケート提出前に回答内容をよく確認してください。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "course-info.html#期末試験2025",
    "href": "course-info.html#期末試験2025",
    "title": "講義",
    "section": "期末試験（2025）",
    "text": "期末試験（2025）\n\n試験時間：90分\n試験範囲：講義で扱ったすべての内容\n参照・使用できるもの\n\n電卓\n\n平方根，立方根の計算方法を確認しておいてください。\n\n公認カンニングペーパー（自筆，表面のみ）\n\n\n\n注意事項\n\n学生証：\n\n試験を受けるためには学生証の提示が必要です。\n\n携帯電話・スマートウォッチ等の通信機器：\n\nいかなる形態でも通信機器の使用は禁止しますので、電源を切り必ずかばん等にしまってください。\n時計や電卓の代用として使用することも出来ません。",
    "crumbs": [
      "講義"
    ]
  },
  {
    "objectID": "notation.html",
    "href": "notation.html",
    "title": "記号",
    "section": "",
    "text": "集合",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "notation.html#集合",
    "href": "notation.html#集合",
    "title": "記号",
    "section": "",
    "text": "\\(A\\)\n\n集合。大文字で表す。\n\n\\(A \\setminus B\\)\n\n集合 \\(A\\) と集合 \\(B\\) の差集合。",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "notation.html#線形代数",
    "href": "notation.html#線形代数",
    "title": "記号",
    "section": "線形代数",
    "text": "線形代数\n\n\n\n記号\n意味\n\n\n\n\n\\(\\mathbf{x}\\), \\(\\mathbf{y}\\)\nベクトル。太字の小文字で表す。\n\n\n\\(\\mathbf{A}\\), \\(\\mathbf{B}\\)\n行列。太字の大文字で表す。\n\n\n\\(\\mathbf{I}\\)\n単位行列。",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "notation.html#確率統計",
    "href": "notation.html#確率統計",
    "title": "記号",
    "section": "確率統計",
    "text": "確率統計\n\\(X\\): 確率変数。大文字で表す。\n\\(\\mathbb{P}(X = x)\\): 確率変数 \\(X\\) が \\(x\\) をとる確率\n\\(\\mathbb{E}[X]\\): 確率変数 \\(X\\) の期待値\n\\(F_X(x)\\): 確率変数 \\(X\\) の累積分布関数\n\\(f_X(x)\\): 確率変数 \\(X\\) の確率密度関数\n\\(p_X(x)\\): 確率変数 \\(X\\) の確率質量関数\n\\(\\phi(z)\\): 標準正規分布の確率密度関数",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "notation.html#関数",
    "href": "notation.html#関数",
    "title": "記号",
    "section": "関数",
    "text": "関数\n\\(A\\) は要素の間に順序が定義された集合とする。\n\\(\\max A\\): 集合 \\(A\\) の最大値。\n\\(\\min A\\): 集合 \\(A\\) の最小値。\n\\((x)^+\\): \\(x\\) と \\(0\\) のうち大きい方。すなわち、\\((x)^+ = \\max(x, 0)\\)。\n\\((x)^-\\): \\(x\\) と \\(0\\) のうち小さい方の絶対値。すなわち、\\((x)^- = \\max(-x, 0) = -\\min(x, 0)\\)。",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "notation.html#例題",
    "href": "notation.html#例題",
    "title": "記号",
    "section": "例題",
    "text": "例題\n\n例 1 (差集合) \\(A = \\{1, 2, 3\\}\\)、\\(B = \\{2, 3, 4\\}\\) とする。このとき、\\(A \\setminus B = \\{1\\}\\) である。\n\n\n例 2 (最大値と最小値) \\(A = \\{1, 0, -1\\}\\) とする。このとき、\\(\\max A = 1\\)、\\(\\min A = -1\\) である。\n\n\n例 3 (正の部分) \\((10)^+ = 10\\)、\\((-30)^+ = 0\\) である。\n\n\n例 4 (負の部分) \\((10)^- = 0\\)、\\((-30)^- = 30\\) である。",
    "crumbs": [
      "記号"
    ]
  },
  {
    "objectID": "inventory/intro.html",
    "href": "inventory/intro.html",
    "title": "1  在庫管理とは",
    "section": "",
    "text": "1.1 在庫量\n商店・工場・倉庫などで、原材料・部品・製品などを適切に管理することを在庫管理（Inventory Management）という。一般的に、在庫管理の目的は、顧客の需要を満たしつつ、在庫に関わる費用を最小化することである。\n在庫量が多すぎると、保管費用がかかる。逆に、在庫量が少なすぎると、欠品が発生し、顧客の需要を満たせなくなる。在庫管理は次の二つの問題を決定する。\n科学的在庫管理（Scientific Inventory Management）では、これらの問題に答えるために、次の手順で在庫管理を行う。\n一般、\\(BO\\) と \\(OH\\) は次のように表される。\n\\[\nOH = I^+ = \\max(0, I)\n\\]\n\\[\nBO = I^- = \\max(0, -I)\n\\]",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/intro.html#在庫量",
    "href": "inventory/intro.html#在庫量",
    "title": "1  在庫管理とは",
    "section": "",
    "text": "需要（demand）\n\nある期間に顧客が購入したい商品の量。通常、\\(d\\) で表す。\n\n手持ち在庫（on-hand inventory）\n\nある時点で、実際に手元にある在庫の量。\\(OH\\) で表す。\n\nバックオーダー（backorder）\n\n手持ち在庫がなく、満たせない需要。\\(BO\\) で表す。\n\n在庫量（inventory level）\n\nある時点での在庫の量。\\(I\\) で表す。\n\n\n\n\n\n\n例 1.1 手持ち在庫が \\(OH = 50\\)、需要が \\(d = 30\\) のとき、在庫量は次のように計算される。\n\\[\nI = 50 - 30 = 20\n\\]\n手持ち在庫が \\(OH = 50\\)、需要が \\(d = 70\\) のとき、在庫量は次のように計算される。\n\\[\nI = 50 - 70 = -20\n\\]\nこのとき、手持ち在庫は\n\\[\nOH = I^+ = \\max(0, I) = 0\n\\]\nとなる。バックオーダーは\n\\[\nBO = I^- = \\max(0, -I) = 20\n\\]\nとなる。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/intro.html#在庫モデルの分類",
    "href": "inventory/intro.html#在庫モデルの分類",
    "title": "1  在庫管理とは",
    "section": "1.2 在庫モデルの分類",
    "text": "1.2 在庫モデルの分類\n在庫モデルは、次のような要素で分類される。\n\n需要（demand）\n\n需要が決定論的 (Deterministic) か確率的（Stochastic）か。\n\n観測（review）\n\n在庫量を連続観測 (Continuous Review) するか、周期観測 (Periodic Review) するか。連続観測の場合、在庫量が連続的に観測でき、いつでも発注が可能である。周期観測の場合、一定の期間（例えば1週間）ごとに在庫量を観測する。\n\nリードタイム（lead time）\n\n発注から納品までの期間。調達期間とも呼ばれる。リードタイムが決定論的か確率的か。また、リードタイムが0かどうか。在庫モデルを単純化するために、リードタイムを0とし、発注から納品までの期間を無視することもある。\n\nバックオーダー（backorder）\n\nバックオーダーが許容されるかどうか。需要が手持ち在庫を上回った場合、バックオーダーが許容されると、欠品が発生しても、後で需要を満たすことができる。バックオーダーが許容されない場合、欠品が発生すると、上回った需要は失われ、機会損失が発生する。\n\n計画期間（planning horizon）\n\n単一期間 (Single Period) か、複数期間 (Multi Period) か、無限 (Infinite) か。\n\n\n以下の表に、需要と観測に基づく、古典的な在庫モデルを示す。\n\n\n\n在庫モデル\n需要\n観測\n\n\n\n\nEOQモデル\n決定論的\n連続観測\n\n\nWagner-Whitin\n決定論的\n周期観測\n\n\n安全在庫\n確率的\n連続観測\n\n\n新聞売り子問題\n確率的\n周期観測",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/intro.html#在庫の費用",
    "href": "inventory/intro.html#在庫の費用",
    "title": "1  在庫管理とは",
    "section": "1.3 在庫の費用",
    "text": "1.3 在庫の費用\nここでは、在庫に関わる費用を紹介する。\n\n発注費用（ordering cost）\n\n発注量に関わらず、1回の発注にかかる費用。調達費用、固定費用（fixed cost）などとも呼ばれる。通常、1回の発注にかかる費用を \\(K\\) とする。\n\n購入費用（purchase cost）\n\n商品を購入するためにかかる費用。通常、単位あたりの購入費用を \\(c\\) とする。\n\n欠品費用（stockout cost）\n\n需要が手持ち在庫を上回った場合に発生する費用。通常、単位あたりの欠品費用を \\(p\\) とする。\n\n保管費用（holding cost）\n\n在庫を保管するためにかかる倉庫費用、保険費用、税金、機会費用など。通常、単位時間あたりの1単位あたりの保管費用を \\(h\\) とする。\n\n\n\n例 1.2 (発注費用と購入費用) 毎回の発注量を \\(Q\\)、1回の発注にかかる費用を \\(K\\)、単位あたりの購入費用を \\(c\\) とする。1回の発注にかかる総費用は、次のように計算される。\n\\[\nK + cQ\n\\]\nとなる。\n\n\n例 1.3 (欠品費用) 在庫量を \\(I\\)、需要を \\(d\\)、単位あたりの欠品費用を \\(p\\) とする。欠品費用は次のように計算される。\n\\[\np (d - I)^+\n\\]\n\\(p = 10\\)、\\(I = 50\\)、\\(d = 70\\) のとき、欠品費用は次のように計算される。\n\\[\np (d - I)^+ = 10 (70 - 50)^+ = 200\n\\]\n\\(p = 10\\)、\\(I = 50\\)、\\(d = 20\\) のとき、欠品費用は次のように計算される。\n\\[\np (d - I)^+ = 10 (20 - 50)^+ = 0\n\\]\n\n\n\n例 1.4 (在庫量が一定の保管費用) 1日あたり1単位の在庫を保管するために、\\(h\\) の費用がかかるとする。30日間、50単位の在庫を保管するための総保管費用を計算せよ。\n保管費用は次のように計算される。 \\[\n30 \\times 50 \\times h = 1500h\n\\]\n下の図では、横軸が時間、縦軸が在庫量を表す。\n\n\nコード\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nt = np.linspace(0, 30, 1000)\ninventory = np.full_like(t, 50)\n\n# Plotting the inventory level\nplt.fill_between(t, inventory, color=\"lightgray\", alpha=0.5, label=\"Inventory Level\")\nplt.plot(t, inventory, label=\"Inventory Level\", color=\"black\", linewidth=2)\nplt.xlabel(\"Time\")\nplt.ylabel(\"Inventory Level\")\nplt.axhline(0, color=\"gray\", linewidth=1)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n一般的に、保管費用は次の式で計算される。\n\\[\n\\text{保管費用} = \\text{面積} \\times h\n\\]\n\n\n例 1.5 (在庫が時間とともに変化する保管費用) 通常、在庫量が定数ではなく、時間とともに変化する。ここでは、在庫量が時間とともに線形に減少し、0になると在庫が補充される場合を考える。毎回の発注量を \\(500\\) とする。\n下の図に示すように在庫量が時間とともに変化するとする。6 日間の保管費用を計算せよ。\n\n\nコード\n# Parameters\nd = 250  # Demand rate\nQ = 500  # Order quantity\nT = Q / d  # Cycle length\nt = np.linspace(0, 2.999 * T, 1000)\n\n# Inventory level over time\ninventory = np.maximum(0, Q - (d * t) % Q)\n\n# Plotting the inventory level\nplt.fill_between(t, inventory, color=\"lightgray\", alpha=0.5, label=\"Inventory Level\")\nplt.plot(t, inventory, label=\"Inventory Level\", color=\"black\", linewidth=2)\nplt.xlabel(\"Time\")\nplt.ylabel(\"Inventory Level\")\nplt.axhline(0, color=\"gray\", linewidth=1)\nplt.ylim(bottom=0, top=Q + 200)\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n保管費用は \\(\\text{面積} \\times h\\) で計算される。それぞれの三角形の面積は \\(\\frac{1}{2} \\times 500 \\times 2\\) であるため、6 日間の保管費用は次のように計算される。\n\\[\n\\frac{2 \\times 500}{2} \\times 3 \\times h\n\\]",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/intro.html#在庫方策",
    "href": "inventory/intro.html#在庫方策",
    "title": "1  在庫管理とは",
    "section": "1.4 在庫方策",
    "text": "1.4 在庫方策\n確率的在庫モデルにおいて、一つ重要な概念は在庫方策（inventory policy）である。在庫方策は、在庫の状況に応じて、在庫管理のルールを定めるものである。代表的な在庫方策を以下に示す。\n\n\\((r, Q)\\) 方策：在庫量を連続的に観測し、在庫量が発注点 \\(r\\) 以下になったときに発注量 \\(Q\\) を発注する方式である。発注点方式とも呼ばれる。\nBSP 方策（Base Stock Policy）：在庫量を定期的に観測し、在庫量が基準在庫 \\(S\\) 以下になったときに、在庫量を \\(S\\) まで補充する方式である。定期発注方式とも呼ばれる。\n\\((s, S)\\) 方策：在庫量を定期的に観測し、在庫量が発注点 \\(s\\) 以下になったときに、在庫量を補充点 \\(S\\) まで補充する方式である。\n\n一部の確率的在庫モデルにに対し、これらの在庫方策は最適であることが知られている。その場合、在庫方策が持つパラメータを最適化することで、在庫の期待コストを最小化することができる。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/intro.html#練習問題",
    "href": "inventory/intro.html#練習問題",
    "title": "1  在庫管理とは",
    "section": "1.5 練習問題",
    "text": "1.5 練習問題\n\n在庫管理の目的は、_を満たしつつ、_を最小化することである。\n在庫管理の決定すべき二つの問題は、_と_である。\n在庫量 \\(I = -30\\)，需要 \\(d = 10\\) のとき、手持ち在庫 \\(OH\\) とバックオーダー \\(BO\\) を計算せよ。\n1回の発注にかかる費用 \\(K = 1000\\)、単位あたりの購入費用 \\(c = 50\\)、発注量 \\(Q = 200\\) のとき、3回の発注にかかる総費用を計算せよ。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>在庫管理とは</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html",
    "href": "inventory/eoq.html",
    "title": "2  経済的発注量",
    "section": "",
    "text": "2.1 記号\n経済的発注量（EOQ: Economic Order Quantity）モデルは，最も基本的な在庫管理モデルの一つである．Harris (1990) がこのモデルを最初に提案した．\nEOQモデルは，単位時間あたりの需要量は決定論的で，一定であると仮定する．すなわち，需要量は事前に分かっており，時間とともに変化しない．単位時間あたりの需要量は需要率（demand rate）と呼ばれ，記号 \\(d\\) で表される．リードタイムは0とし，発注から納品までの時間はないと仮定する．一回の発注量を \\(Q\\) とし，一定であるとする．欠品は許せないとする．全ての需要は満されなければならない．また，EOQモデルでは，在庫量は連続的に観測され，いつでも発注が可能であるとする．\n在庫に関わる費用は，1回あたりの発注費用 \\(K\\)，単位時間あたりの1単位の保管費用 \\(h\\) と，購入単価 \\(c\\) がある．\nEOQモデルの最適解は次の二つの性質を持つ(Snyder と Shen 2019)：\n以上の性質から，在庫量の時間的変化は下図のようになる．\n発注の間隔をサイクル(cycle)と呼び，サイクル期間は\n\\[\nT = \\frac{Q}{d}\n\\]\nで与えられる．",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#記号",
    "href": "inventory/eoq.html#記号",
    "title": "2  経済的発注量",
    "section": "",
    "text": "記号\n意味\n\n\n\n\n\\(d\\)\n単位時間あたりの需要量\n\n\n\\(K\\)\n1回あたりの発注費用\n\n\n\\(h\\)\n単位時間あたりの1単位の保管費用\n\n\n\\(c\\)\n購入単価\n\n\n\\(Q\\)\n発注量\n\n\n\\(T\\)\nサイクル期間\n\n\n\\(g(Q)\\)\n平均コスト",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#コスト関数",
    "href": "inventory/eoq.html#コスト関数",
    "title": "2  経済的発注量",
    "section": "2.2 コスト関数",
    "text": "2.2 コスト関数\nここでは，1サイクルあたりのコストを考える．\n発注費用：発注は1回だけ行うため，発注費用は \\(K\\) である．\n購入費用：\\(Q\\) 個の商品を単価 \\(c\\) で購入するため，購入費用は \\(cQ\\) である．\n保管費用：サイクル期間 \\(T\\) は \\(\\frac{Q}{d}\\) であるため，1サイクルあたりの保管費用は\n\\[\n\\frac{TQ}{2} h = \\frac{hQ^2}{2d}\n\\]\nとなる．\n以上より，1サイクルあたりのコストは次のように表される．\n\\[\nK + cQ + \\frac{hQ^2}{2d}\n\\]\n平均コストは，これをサイクル期間 \\(T\\) で割ったものとして定義される．したがって，平均コスト \\(g(Q)\\) は次のように表される．\n\\[\\begin{align*}\ng(Q) &= \\frac{1}{T} \\left( K + cQ + \\frac{hQ^2}{2d} \\right) \\\\\n&= \\frac{d}{Q} \\left( K + cQ + \\frac{hQ^2}{2d} \\right) \\\\\n&= \\frac{Kd}{Q} + c d + \\frac{hQ}{2}\n\\end{align*}\\]\n以上より，平均コストは発注量 \\(Q\\) の関数として次のように表される．\n\\[\ng(Q) = \\frac{Kd}{Q} + cd + \\frac{hQ}{2}\n\\]",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#最適発注量",
    "href": "inventory/eoq.html#最適発注量",
    "title": "2  経済的発注量",
    "section": "2.3 最適発注量",
    "text": "2.3 最適発注量\nEOQモデルの目的は，平均コスト \\(g(Q)\\) を最小化する発注量 \\(Q\\) を求めることである．\n平均コストの導関数 \\(g'(Q)\\) が 0 となる点を求めることで，最適発注量 \\(Q^*\\) を求めることができる．\n\\[\ng'(Q) = -\\frac{Kd}{Q^2} + \\frac{h}{2} = 0\n\\]\nこれを解くと，最適発注量\n\\[\nQ^* = \\sqrt{\\frac{2Kd}{h}}\n\\]\nを得る．これをEOQ公式（EOQ formula）と呼ぶ．\\(Q^*\\) を経済的発注量と呼ぶ（経済的は最適という意味である）．\n二階導関数 \\(g''(Q)\\) を求めて，最適発注量が最小値を与えることを確認する．\n\\[\ng''(Q) = \\frac{2Kd}{Q^3} &gt; 0\n\\]\n\\(g''(Q) &gt; 0\\) であるため，\\(Q^*\\) は最小値を与える．\n最適発注量 \\(Q^*\\) を次の定理にまとめる．\n\n定理 2.1 EOQモデルにおいて，最適発注量 \\(Q^*\\) は \\[\nQ^* = \\sqrt{\\frac{2Kd}{h}}\n\\tag{2.1}\\]\nで与えられる．\n\n\\(Q^*\\) を用いて，最適なサイクル期間 \\(T^*\\) を求めることができる．\n\\[\nT^* = \\frac{Q^*}{d} = \\sqrt{\\frac{2K}{hd}}\n\\tag{2.2}\\]\n式 2.1 と 式 2.2 から，以下の性質がわかる．\n\n\\(h\\) の増加に伴い，\\(Q^*\\) は減少する．保管費用が高い場合は，少量で高い頻度で発注することが望ましい．\n\\(K\\) の増加に伴い，\\(Q^*\\) は増加する．発注費用が高い場合は，多量で低い頻度で発注することが望ましい．\n\\(d\\) の増加に伴い，\\(Q^*\\) は増加する．\n\\(c\\) は \\(Q^*\\) に影響しない．購入単価は最適発注量に影響しない．\n\n次の図は，購入単価を \\(c = 0\\) とするとき，平均コスト \\(g(Q)\\)，発注コスト \\(\\frac{Kd}{Q}\\)，保管コスト \\(\\frac{hQ}{2}\\) のグラフを示す．\n\n\nコード\n# Parameters\nK = 40  # Order cost\nh = 10  # Holding cost\nd = 5  # Demand rate\nQ = np.linspace(1, 40, 400)  # Order quantity from 1 to 40\n\n# Cost calculations\norder_cost = K * d / Q\nholding_cost = (h * Q) / 2\naverage_cost = order_cost + holding_cost\noptimal_Q = np.sqrt(2 * K * d / h)\n\n# Plotting the costs\nplt.plot(Q, order_cost, label=r\"$Kd/Q$\", color=\"blue\")\nplt.plot(Q, holding_cost, label=r\"$hQ/2$\", color=\"orange\")\nplt.plot(Q, average_cost, label=r\"$g(Q)$\", color=\"green\", linewidth=2)\nplt.axvline(optimal_Q, color=\"red\", linestyle=\"--\", label=r\"$Q^*$\")\nplt.xlabel(\"Order Quantity Q\")\nplt.ylabel(\"Cost\")\nplt.ylim(bottom=0)\nplt.legend()\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n平均コストが最小となる発注量 \\(Q^*\\) は，発注コストと保管コストの交差点である．すなわち，発注コストと保管コストを等しくする発注量は最適な発注量 \\(Q^*\\) である．この性質は以下の式からわかる．\n\\[\n\\frac{Kd}{Q^*} = \\frac{hQ^*}{2} \\Longrightarrow Q^* = \\sqrt{\\frac{2Kd}{h}}\n\\]\nまた，この図からもわかるように，\\(Q\\) の増加に伴い，平均発注コストは減少し，平均保管コストは増加する．逆もまた然りである．\n\n例 2.2 ある電気量販店では，毎月250台のPCが販売されている．発注費用は5000円，保管費用は1台あたり月150円，購入単価は10万円とする．このとき，最適発注量 \\(Q^*\\) は次のように求められる．\n\\[\nQ^* = \\sqrt{\\frac{2 \\cdot 5000 \\cdot 250}{150}}\n\\]\nExcel では，下記のように計算できる．\n=SQRT(2 * 5000 * 250 / 150)\nPython では，次のようにeoq(K, d, h) 関数を定義し，最適発注量を計算できる．\n\ndef eoq(K, d, h):\n    \"\"\"\n    Calculate the Economic Order Quantity (EOQ).\n\n    Parameters:\n    K (float): Order cost\n    d (float): Demand rate\n    h (float): Holding cost\n\n    Returns:\n    float: Optimal order quantity Q*\n    \"\"\"\n    return np.sqrt(2 * K * d / h)\n\n\nif __name__ == \"__main__\":\n    K = 5000  # Order cost\n    d = 250  # Demand rate (units per month)\n    h = 150  # Holding cost (per unit per month)\n\n    Q_star = eoq(K, d, h)\n    T_star = Q_star / d\n    print(f\"Optimal Order Quantity (Q*): {Q_star:.2f}\")\n    print(f\"Optimal Cycle Time (T*): {T_star:.2f}\")\n\nOptimal Order Quantity (Q*): 129.10\nOptimal Cycle Time (T*): 0.52\n\n\nPCの場合は，注文量が整数である必要があるため，\\(g(129)\\) と \\(g(130)\\) を比較して最適発注量を決定する．",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#リードタイム",
    "href": "inventory/eoq.html#リードタイム",
    "title": "2  経済的発注量",
    "section": "2.4 リードタイム*",
    "text": "2.4 リードタイム*\nEOQ モデルでは，リードタイムは0と仮定している．リードタイムが \\(L &gt; 0\\) の場合も，最適発注量 \\(Q^*\\) も変換せず，\\(L\\) 期間前に \\(Q^*\\) を発注すればよい．\nここでは，\\(r\\) を発注点（reorder point）とする．在庫量が \\(r\\) になったときに発注を行う．リードタイム \\(L\\) の間に需要が \\(dL\\) 個あるため，発注点は次のように表される．\n\\[\nr = dL\n\\]\n\n例 2.3 上の例で，リードタイムが一週間とし，一か月を4週間とすると，リードタイムは \\(L = 1/4\\) となる．したがって，発注点は次のように求められる．\n\\[\nr = dL = 250 \\times \\frac{1}{4} = 62.5\n\\]\nPCの在庫量が63台になったときに発注を行う．",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#他のeoqモデル",
    "href": "inventory/eoq.html#他のeoqモデル",
    "title": "2  経済的発注量",
    "section": "2.5 他のEOQモデル*",
    "text": "2.5 他のEOQモデル*\n\nバックオーダーを考慮したEOQモデル\n数量割引（quantity discount）を考慮したEOQモデル\n\n総量割引（all-units discount）\n増分割引（incremental discount）",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#文献案内",
    "href": "inventory/eoq.html#文献案内",
    "title": "2  経済的発注量",
    "section": "2.6 文献案内",
    "text": "2.6 文献案内\nオペレーションズ・リサーチに関する教科書の多くは，EOQモデルを取り扱っている．モデルの分類から，「deterministic continuous-review inventory models」などの章で説明されていることが多い．\nリードタイムを考慮したEOQモデルについては，Snyder と Shen (2019) で説明されている．\n数量割引を考慮したEOQモデルについては，Snyder と Shen (2019) ，Camm ほか (2022) で説明されている．\nバックオーダーを考慮したEOQモデルについては，Snyder と Shen (2019) ，Camm ほか (2022) ，Hillier と Lieberman (2025) で説明されている．",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/eoq.html#練習問題",
    "href": "inventory/eoq.html#練習問題",
    "title": "2  経済的発注量",
    "section": "2.7 練習問題",
    "text": "2.7 練習問題\n\n練習 2.1 ある工場は，鋼材を毎日16トン消費し，年間250日稼働している．鋼材の購入単価は1トンあたり1100ドル，1回の発注にかかる固定費は5500ドル，保管費は鋼材1トンあたり年間は275ドルである．EOQモデルを用いて，次の問いに答えよ．\n\n最適な発注量を求めよ．\n最適なサイクル期間を求めよ．\n年間の平均費用を求めよ．\n\n\n\n解答 2.1. 需要率は \\(d = 4000\\) で，発注費用は \\(K = 5500\\)，保管費用は \\(h = 275\\)，購入単価は \\(c = 1100\\) である．\n経済的発注量 \\(Q^*\\) は\n\\[\nQ^* = \\sqrt{\\frac{2Kd}{h}} = \\sqrt{\\frac{2 \\cdot 5500 \\cdot 4000}{275}} = 400 \\text{ トン}\n\\]\nとなる．式 2.2 より，サイクル期間 \\(T^*\\) は\n\\[\nT^* = \\frac{Q^*}{d} = \\frac{400}{4000} = 0.1 \\text{ 年}\n\\]\nとなる．年間平均コスト \\(g(Q^*)\\) は \\[\ng(Q^*) = \\frac{Kd}{Q^*} + cd + \\frac{hQ^*}{2} = 4510000 \\text{ ドル}\n\\] となる．\n\n\nコード\nimport numpy as np\n\nK = 5500  # Order cost\nd = 4000  # Demand rate (units per year)\nh = 275  # Holding cost (per unit per year)\nc = 1100  # Purchase cost (per unit)\n\nQ_star = np.sqrt(2 * K * d / h)\nT_star = Q_star / d\ng_avg = (K * d / Q_star) + (c * d) + (h * Q_star / 2)\nprint(f\"Optimal Order Quantity (Q*): {Q_star:.2f} tons\")\nprint(f\"Optimal Cycle Time (T*): {T_star:.2f} years\")\nprint(f\"Average Annual Cost (g(Q*)): {g_avg:.2f} dollars\")\n\n\nOptimal Order Quantity (Q*): 400.00 tons\nOptimal Cycle Time (T*): 0.10 years\nAverage Annual Cost (g(Q*)): 4510000.00 dollars\n\n\n\n\n練習 2.2 ある家電量販店では，あるスマートフォンを毎週50台販売している．店舗はスマートフォンを1台あたりメーカーに10万円で購入している．毎回の発注には発注処理や配送などで5000円の固定費がかかる．また，スマートフォン1台あたりの保管費用は1週間で100円である．EOQモデルを用いて，次の問いに答えよ．\n\n最適な発注量を求めよ．\n最適なサイクル期間を求めよ．\n\n\n\n解答 2.2. 需要率は \\(d = 50\\) で，発注費用は \\(K = 5000\\)，保管費用は \\(h = 100\\) である．\n経済的発注量 \\(Q^*\\) は \\[\nQ^* = \\sqrt{\\frac{2Kd}{h}} = \\sqrt{\\frac{2 \\cdot 5000 \\cdot 50}{100}} \\approx 70.71 \\text{ 台}\n\\] となる．スマートフォンの場合は，注文量が整数である必要があるため，\\(g(70)\\) と \\(g(71)\\) を比較して最適発注量を決定する．\n\\[\ng(70) = \\frac{5000 \\cdot 50}{70} + 100 \\cdot 70 / 2 \\approx 7071.43\n\\] \\[\ng(71) = \\frac{5000 \\cdot 50}{71} + 100 \\cdot 71 / 2 \\approx 7071.13\n\\] \\(g(71) &lt; g(70)\\) であるため，最適発注量は \\(Q^* = 71\\) 台となる．\nサイクル期間 \\(T^*\\) は \\[\nT^* = \\frac{Q^*}{d} = \\frac{71}{50} = 1.42 \\text{ 週間}\n\\] となる．\n\n\nコード\nimport numpy as np\n\nK = 5000  # Order cost\nd = 50  # Demand rate (units per week)\nh = 100  # Holding cost (per unit per week)\nQ_star = np.sqrt(2 * K * d / h)\n\n\n# Since order quantity must be an integer, compare g(70) and g(71)\ndef g(Q):\n    return (K * d / Q) + (h * Q / 2)\n\n\ng_70 = g(70)\ng_71 = g(71)\noptimal_Q = 70 if g_70 &lt; g_71 else 71\nT_star = optimal_Q / d\nprint(f\"Optimal Order Quantity (Q*): {optimal_Q} units\")\nprint(f\"Optimal Cycle Time (T*): {T_star:.2f} weeks\")\n\n\nOptimal Order Quantity (Q*): 71 units\nOptimal Cycle Time (T*): 1.42 weeks\n\n\n\n\n\n\n\nCamm, Jeffrey, James Cochran, Michael Fry, Jeffrey Ohlmann, David Anderson, Dennis Sweeney, と Thomas Williams. 2022. An introduction to management science: Quantitative approaches to decision making. 16th 版. Florence, AL: South-Western College Publishing.\n\n\nHarris, Ford W. 1990. 「How many parts to make at once」. Oper. Res. 38 (6): 947–50.\n\n\nHillier, Frederick, と Gerald Lieberman. 2025. ISE introduction to operations research. 11th 版. Columbus, OH: McGraw-Hill Education.\n\n\nSnyder, Lawrence V, と Zuo-Jun Max Shen. 2019. Fundamentals of supply chain theory. 2nd 版. Nashville, TN: John Wiley & Sons.",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>経済的発注量</span>"
    ]
  },
  {
    "objectID": "inventory/safety.html",
    "href": "inventory/safety.html",
    "title": "3  安全在庫",
    "section": "",
    "text": "3.1 近似解法\n需要 \\(D\\) がある確率分布に従うと仮定する。リードタイムを \\(L\\) とし、既知の定数とする。発注費用を \\(K\\)、単位あたりの保管費用を \\(h\\) とする。在庫量が連続的に観測され、いつでも発注が可能であるとする連続観測の場合を考える。\n在庫管理には，\\((r, Q)\\) 方策が用いられるとする。在庫量が発注点 \\(r\\) 以下になったときに、発注量 \\(Q\\) を発注する。この場合、与えられたサービスレベルを満たすように、発注点 \\(r\\) と発注量 \\(Q\\) を決定することが目的である。\n単位期間あたりの需要を \\(D\\) とし、\\(D\\) は正規分布 \\(N(\\mu, \\sigma^2)\\) に従うと仮定する。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>安全在庫</span>"
    ]
  },
  {
    "objectID": "inventory/safety.html#近似解法",
    "href": "inventory/safety.html#近似解法",
    "title": "3  安全在庫",
    "section": "",
    "text": "ノート\n\n\n\nこの問題の定式化および厳密解法は、ここでは説明しない。Snyder と Shen (2019) の「Fundamentals of Supply Chain Theory」などの文献を参照されたい。 以下は \\((r, Q)\\) の近似解法を紹介する。\n\n\n\n\n3.1.1 発注量 \\(Q\\)\n\\(D\\) の平均需要 \\(\\mu\\) をEOQモデルの需要率とみなすと、発注量 \\(Q\\) は次のように求めることができる(Camm ほか 2022)。\n\\[\nQ = \\sqrt{\\frac{2K \\mu}{h}}\n\\]\n得られた発注量 \\(Q\\) は、最適解ではなく、近似解であることに注意されたい。\n\n例 3.2 単位期間あたりの需要 \\(D\\) が正規分布 \\(N(100, 20^2)\\) に従うと仮定する。発注費用 \\(K = 200\\)、単位あたりの保管費用 \\(h = 5\\) のとき、発注量 \\(Q\\) を求めよ。\n\\[\nQ = \\sqrt{\\frac{2K \\mu}{h}} = \\sqrt{\\frac{2 \\cdot 200 \\cdot 100}{5}} \\approx 89.44\n\\]\nPython では、以下のように計算できる。\n\n\nコード\nimport math\n\nK = 200\nh = 5\nmu = 100\nQ = math.sqrt((2 * K * mu) / h)\nprint(f\"order quantity: {Q:.2f}\")\n\n\norder quantity: 89.44\n\n\n\n\n\n3.1.2 発注点 \\(r\\)\nリードタイム期間中に発生する需要は \\(D_L \\sim N(\\mu_L, \\sigma_L^2)\\) とし、正規分布の再生性により、\n\\[\n\\mu_L = \\mu L, \\quad \\sigma_L^2 = \\sigma^2 L\n\\]\nになる。すなわち、リードタイム期間中の平均需要は \\(\\mu_L = \\mu L\\)、標準偏差は \\(\\sigma_L = \\sigma \\sqrt{L}\\) である。\n\n\n\n\n\n\nノート正規分布の再生性\n\n\n\n\\(X_1, X_2, \\ldots, X_n\\) が独立に同一の正規分布 \\(N(\\mu, \\sigma^2)\\) に従うならば、\\(Y = X_1 + X_2 + \\cdots + X_n\\) は正規分布 \\(N(n\\mu, n\\sigma^2)\\) に従う。\n\n\n\n例 3.3 単位期間あたりの需要 \\(D\\) が正規分布 \\(N(100, 20^2)\\) に従うと仮定する。リードタイム \\(L = 4\\) のとき、リードタイム期間中の平均需要 \\(\\mu_L\\) と標準偏差 \\(\\sigma_L\\) を求めよ。\n\\[\n\\mu_L = \\mu L = 100 \\cdot 4 = 400\n\\]\n\\[\n\\sigma_L = \\sigma \\sqrt{L} = 20 \\sqrt{4} = 40\n\\]\nこれにより，リードタイム期間中の需要 \\(D_L\\) は正規分布 \\(N(400, 40^2)\\) に従うことがわかる。\n\n発注点 \\(r\\) を決めるためには、サービスレベル（service level）を考える。ここでは、サービスレベルを、リードタイム期間中に需要を満たす確率と定義する。サービスレベルを \\(\\alpha\\) とし、\\(0 &lt; \\alpha &lt; 1\\) とする。\n与えられたサービスレベル \\(\\alpha\\) に対して、\\(D_L\\) が発注点 \\(r\\) 以下になる確率（欠品が発生しない確率、つまり、サービスレベル）が \\(\\alpha\\) になるように発注点 \\(r\\) を決定する。\n\\[\nP(D_L \\leq r) = \\alpha\n\\]\nもし、発注点 \\(r = \\mu_L\\) とすると、\\(P(D_L \\leq \\mu_L) = 0.5\\) となる。すなわち、50% の確率で欠品が発生することになる。\n\n\n\n\n\n\nノート\n\n\n\n\\[\nP(D_L \\leq \\mu_L) = P\\left(\\frac{D_L - \\mu_L}{\\sigma_L} \\leq 0\\right) = \\Phi(0) = 0.5\n\\]\n\n\nしたがって、サービスレベル \\(\\alpha &gt; 0.5\\) の場合、発注点 \\(r\\) は平均需要 \\(\\mu_L\\) より大きくなる必要がある。\\(r - \\mu_L\\) を安全在庫（safety stock）と呼び、\\(s\\) と表す。\n\\[\ns = r - \\mu_L\n\\]\nこの式を変形すると、発注点 \\(r\\) は次のように表される。\n\\[\nr = \\mu_L + s\n\\]\n従って、サービスレベル \\(P(D_L \\leq r) = \\alpha\\) は次のように表される。\n\\[\nP(D_L \\leq \\mu_L + s) = \\alpha\n\\]\n与えられたサービスレベル \\(\\alpha\\) に対して、安全在庫 \\(s\\) を求めることを考える。ここで、\\(s \\geq 0\\) とする。\n\\[\\begin{align}\nP(D_L - \\mu_L \\leq s) &= \\alpha \\\\\nP\\left(\\frac{D_L - \\mu_L}{\\sigma_L} \\leq \\frac{s}{\\sigma_L}\\right) &= \\alpha \\\\\n\\Phi\\left(\\frac{s}{\\sigma_L}\\right) &= \\alpha \\\\\n\\frac{s}{\\sigma_L} &= \\Phi^{-1}(\\alpha) \\\\\ns &= \\sigma_L \\Phi^{-1}(\\alpha) \\\\\ns &= \\sigma \\sqrt{L} \\Phi^{-1}(\\alpha)\n\\end{align}\\]\nここで、\\(\\Phi(\\cdot)\\) は標準正規分布の累積分布関数であり、\\(\\Phi^{-1}(\\alpha)\\) はその逆関数である。したがって、発注点 \\(r\\) は次のように表される。\n\\[\nr = \\mu_L + s = \\mu L + \\sigma \\sqrt{L} \\Phi^{-1}(\\alpha)\n\\]\n\\(\\Phi^{-1}(\\alpha)\\) は標準正規分布表、Excel、Python などを用いて求めることができる。\n\n例 3.4 単位期間あたりの需要 \\(D\\) が正規分布 \\(N(100, 20^2)\\) に従うと仮定する。リードタイム \\(L = 4\\)、発注点 \\(r = 500\\) のとき、安全在庫 \\(s\\) とサービスレベル \\(\\alpha\\) を求めよ。\nリードタイム期間中の平均需要は \\(\\mu_L = 400\\) である。したがって、安全在庫 \\(s\\) は次のように求められる。 \\[\ns = r - \\mu_L = 500 - 400 = 100\n\\]\nサービスレベル \\(\\alpha\\) は次のように求められる。\n\\[\n\\alpha = P(D_L \\leq r) = \\Phi\\left(\\frac{r - \\mu_L}{\\sigma_L}\\right) = \\Phi\\left(\\frac{100}{40}\\right) = \\Phi(2.5) \\approx 0.99379\n\\]\n発注点 \\(r = 500\\) のとき、安全在庫 \\(s\\) は100、サービスレベル \\(\\alpha\\) は約 99.379% である。\n\n\n例 3.5 リードタイム \\(L = 4\\)、平均需要 \\(\\mu = 100\\)、需要の標準偏差 \\(\\sigma = 20\\)、サービスレベル \\(\\alpha = 0.95\\) のとき、発注点 \\(r\\) と安全在庫 \\(s\\) を求める。\nリードタイム期間中の平均需要と標準偏差は次のように計算される。\n\\[\\begin{align}\n\\mu_L &= \\mu L = 100 \\cdot 4 = 400 \\\\\n\\sigma_L &= \\sigma \\sqrt{L} = 20 \\sqrt{4} = 40 \\\\\n\\end{align}\\]\n標準正規分布表から \\(\\Phi^{-1}(0.95) \\approx 1.64485\\) を得る。これを用いて安全在庫 \\(s\\) と発注点 \\(r\\) を求める。\n\\[\\begin{align}\ns &= \\sigma_L \\Phi^{-1}(0.95) \\approx 40 \\cdot 1.64485 \\approx 65.79 \\\\\nr &= \\mu_L + s \\approx 400 + 65.79 \\approx 465.79\n\\end{align}\\]\nしたがって、発注点 \\(r\\) は約465.79、必要な安全在庫 \\(s\\) は約65.79となる。\nPython では、以下のように計算できる。\n\n\nコード\nfrom scipy.stats import norm\n\nL = 4\nmu = 100\nsigma = 20\nalpha = 0.95\n\nmu_L = mu * L\nsigma_L = sigma * (L ** 0.5)\n\ns = sigma_L * norm.ppf(alpha)\nr = mu_L + s\n\nprint(f\"reorder point: {r:.2f},  safety stock: {s:.2f}\")\n\n\nreorder point: 465.79,  safety stock: 65.79",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>安全在庫</span>"
    ]
  },
  {
    "objectID": "inventory/safety.html#欠品費用を考慮する場合",
    "href": "inventory/safety.html#欠品費用を考慮する場合",
    "title": "3  安全在庫",
    "section": "3.2 欠品費用を考慮する場合*",
    "text": "3.2 欠品費用を考慮する場合*\nまた、欠品費用も考慮する場合、バックオーダーを考慮した EOQ モデルを用いて、発注量 \\(Q\\) は次のように求めることができる(Hillier と Lieberman 2025)。\n\\[\nQ = \\sqrt{\\frac{2K \\mu}{h}} \\sqrt{\\frac{p+h}{p}}\n\\]\n\\(p\\) は単位あたりの欠品費用である。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>安全在庫</span>"
    ]
  },
  {
    "objectID": "inventory/safety.html#文献案内",
    "href": "inventory/safety.html#文献案内",
    "title": "3  安全在庫",
    "section": "3.3 文献案内",
    "text": "3.3 文献案内",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>安全在庫</span>"
    ]
  },
  {
    "objectID": "inventory/safety.html#練習問題",
    "href": "inventory/safety.html#練習問題",
    "title": "3  安全在庫",
    "section": "3.4 練習問題",
    "text": "3.4 練習問題\n\n練習 3.1 ある会社は、A商品を販売している。\\((r, Q)\\) 方策に基づいて在庫管理を行っている。毎日の需要 \\(D\\) は正規分布 \\(N(150, 30^2)\\) に従う。商品を発注するための固定費用は \\(K = 300\\)、単位あたりの保管費用は \\(h = 4\\)，購入単価は \\(c = 20\\) である。リードタイムは \\(L = 4\\) 日である。この会社は，90% のサービスレベルを目標としている。このとき、発注量 \\(Q\\)、発注点 \\(r\\)、必要な安全在庫 \\(s\\) を求めよ。\n\n\n解答 3.1. 発注量 \\(Q\\) は次のように求められる。\n\\[\nQ = \\sqrt{\\frac{2K \\mu}{h}} = \\sqrt{\\frac{2 \\cdot 300 \\cdot 150}{4}} = 150\n\\]\nリードタイム期間中の平均需要と標準偏差は次のように計算される。\n\\[\n\\mu_L = \\mu L = 150 \\cdot 4 = 600\n\\]\n\\[\n\\sigma_L = \\sigma \\sqrt{L} = 30 \\sqrt{4} = 60\n\\]\n標準正規分布表から \\(\\Phi^{-1}(0.9) \\approx 1.28155\\) を得る。これを用いて安全在庫 \\(s\\) と発注点 \\(r\\) を求める。\n\\[\ns = \\sigma_L \\Phi^{-1}(0.9) \\approx 60 \\cdot 1.28155 \\approx 76.89\n\\]\n\\[\nr = \\mu_L + s \\approx 600 + 76.89 \\approx 676.89\n\\]\nしたがって、発注量 \\(Q\\) は150、発注点 \\(r\\) は約676.89、必要な安全在庫 \\(s\\) は約76.89となる。\n\n\nコード\nimport math\nfrom scipy.stats import norm\nK = 300\nh = 4\nmu = 150\nsigma = 30\nL = 4\nalpha = 0.9\nQ = math.sqrt((2 * K * mu) / h)\nmu_L = mu * L\nsigma_L = sigma * (L ** 0.5)\ns = sigma_L * norm.ppf(alpha)\nr = mu_L + s\nprint(f\"order quantity: {Q:.2f}, reorder point: {r:.2f},  safety stock: {s:.2f}\")\n\n\norder quantity: 150.00, reorder point: 676.89,  safety stock: 76.89\n\n\n\n\n\n\n\nCamm, Jeffrey, James Cochran, Michael Fry, Jeffrey Ohlmann, David Anderson, Dennis Sweeney, と Thomas Williams. 2022. An introduction to management science: Quantitative approaches to decision making. 16th 版. Florence, AL: South-Western College Publishing.\n\n\nHillier, Frederick, と Gerald Lieberman. 2025. ISE introduction to operations research. 11th 版. Columbus, OH: McGraw-Hill Education.\n\n\nSnyder, Lawrence V, と Zuo-Jun Max Shen. 2019. Fundamentals of supply chain theory. 2nd 版. Nashville, TN: John Wiley & Sons.",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>安全在庫</span>"
    ]
  },
  {
    "objectID": "inventory/wagner-whitin.html",
    "href": "inventory/wagner-whitin.html",
    "title": "4  Wagner-Whitin モデル",
    "section": "",
    "text": "記号\n意味\n\n\n\n\n\\(\\mathcal{T}\\)\n期間の集合、\\(\\mathcal{T} = \\{1, 2, \\ldots, T\\}\\)\n\n\n\\(K\\)\n1回あたりの発注費用\n\n\n\\(h\\)\n単位あたりの保管費用\n\n\n\\(d_t\\)\n第 \\(t\\) 期の需要量\n\n\n\\(q_t\\)\n第 \\(t\\) 期の発注量\n\n\n\\(x_t\\)\n第 \\(t\\) 期の在庫量\n\n\n\\(y_t\\)\n第 \\(t\\) 期に発注する場合は 1、しない場合は 0\n\n\n\\(M\\)\n非負の大きな数\n\n\n\nWagner-Whitin モデルは次のように定式化される。\n\\[\\begin{align}\n\\text{minimize} \\quad & \\sum_{t=1}^{T} (K y_t + h x_t) \\\\\n\\text{subject to} \\quad & x_t = x_{t-1} + q_t - d_t \\quad & \\forall t \\in \\mathcal{T} \\\\\n& q_t \\geq 0 \\quad & \\forall t \\in \\mathcal{T} \\\\\n& q_t \\leq M y_t \\quad & \\forall t \\in \\mathcal{T} \\\\\n& x_t \\geq 0 \\quad & \\forall t \\in \\mathcal{T} \\\\\n& y_t \\in \\{0, 1\\} \\quad & \\forall t \\in \\mathcal{T}\n\\end{align}\\]",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Wagner-Whitin モデル</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html",
    "href": "inventory/newsvendor.html",
    "title": "5  新聞売り子問題",
    "section": "",
    "text": "5.1 記号\nこれまで紹介した EOQ 在庫モデルは、需要が決定論的であると仮定していた。ここからは、需要が確率的であると仮定した在庫モデルを紹介する。\n新聞売り子問題（Newsvendor Problem）は，古典的な確率的在庫モデルの一つである。新聞は次の日には売れなくなるため，新聞売り子問題は最も単純な perishable 在庫モデルとして知られている。新聞に限らず，食品や花などの生鮮品の在庫管理にも応用される。\n新聞売り子が新聞を仕入れ，販売する問題を考える。新聞 1 部の欠品費用を \\(p\\)，保管費用を \\(h\\) とする。新聞売子問題において，\\(p\\) を在庫不足費用（underage cost），\\(h\\) を在庫超過費用（overage cost）とも呼ぶ。\\(p \\gt 0\\)，\\(h \\gt 0\\) とし，初期在庫は 0 とする。\n新聞の需要 \\(D\\) を確率変数とするとき，新聞売り子はどれだけの新聞を発注すればよいかという問題である。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#記号",
    "href": "inventory/newsvendor.html#記号",
    "title": "5  新聞売り子問題",
    "section": "",
    "text": "記号\n意味\n\n\n\n\n\\(h\\)\n1 個当たりの在庫超過費用\n\n\n\\(p\\)\n1 個当たりの在庫不足費用\n\n\n\\(D\\)\n需要（確率変数）\n\n\n\\(d\\)\n需要の観測値\n\n\n\\(f_D(d)\\)\n需要 \\(D\\) の確率密度関数\n\n\n\\(F_D(d)\\)\n需要 \\(D\\) の累積分布関数\n\n\n\\(S\\)\n発注量\n\n\n\\(g(S, d)\\)\n発注量 \\(S\\)，需要の観測値 \\(d\\) に対するコスト\n\n\n\\(g(S)\\)\n\\(g(S, d)\\) の期待値，\\(g(S) = \\mathbb{E}[g(S, D)]\\)",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#定式化",
    "href": "inventory/newsvendor.html#定式化",
    "title": "5  新聞売り子問題",
    "section": "5.2 定式化",
    "text": "5.2 定式化\n新聞売り子が \\(S\\) 部の新聞を仕入れ，需要 \\(D\\) が \\(d\\) であったとする。このとき，新聞売り子のコスト \\(g(S, d)\\) は以下のように表される。\n\\[\ng(S, d) = h (S - d)^+ + p (d - S)^+\n\\tag{5.1}\\]\n\n例 5.2 発注量 \\(S = 100\\)，需要 \\(D\\) の観測値 \\(d = 120\\)，在庫超過費用が \\(h = 10\\)，在庫不足費用が \\(p = 5\\) のとき，コスト \\(g(S, d)\\) は以下のように求められる。\n\\[\ng(100, 120) = 10 (100 - 120)^+ + 5 (120 - 100)^+ = 100\n\\]\n\n観測値 \\(d\\) が分かれば，コスト \\(g(S, d)\\) を計算できる。しかし，需要 \\(D\\) が確率変数であることを思い出そう。ここからは，需要 \\(D\\) が連続型確率変数であると仮定する。\n需要 \\(D\\) の確率密度関数を \\(f_D(d)\\)，累積分布関数を \\(F_D(d)\\) とする。発注量を \\(S\\) としたとき，需要 \\(D \\leq S\\) である確率は，累積分布関数 \\(F_D(S)\\) で与えられる。\n\\[\nP(D \\leq S) = F_D(S) = \\int_{0}^{S} f_D(d) dd\n\\tag{5.2}\\]\n\n例 5.3 需要 \\(D\\) が一様分布 \\(U(100,300)\\) に従うとき，確率密度関数 \\(f_D(250)\\) と累積分布関数 \\(F_D(250)\\) は以下のように表される。\n\nコード\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom scipy.stats import uniform\n\n# 一様分布のパラメータ\na = 100\nb = 300\n# 需要の範囲\nd = np.linspace(a - 50, b + 50, 1000)\n# plot pdf with shaded area\nplt.figure(figsize=(4, 4))\nplt.plot(d, uniform.pdf(d, a, b - a))\nplt.fill_between(\n    d,\n    0,\n    uniform.pdf(d, a, b - a),\n    where=(d &lt;= 250),\n    color=\"skyblue\",\n    alpha=0.5,\n    label=\"F(250)\",\n)\nplt.xlabel(r\"$D$\")\nplt.ylabel(r\"$f_D(d)$\")\nplt.xlim(a - 50, b + 50)\nplt.ylim(0, 0.006)\nplt.show()\n\n# plot cdf\nplt.figure(figsize=(4, 4))\nplt.plot(d, uniform.cdf(d, a, b - a))\nplt.axvline(250, color=\"r\", linestyle=\"--\", label=\"d=250\")\nplt.xlabel(r\"$D$\")\nplt.ylabel(r\"$F_D(d)$\")\nplt.xlim(a - 50, b + 50)\nplt.ylim(0, 1.1)\nplt.show()\n\n\n\n\n\n\n\n確率密度関数 \\(f_D(d)\\)\n\n\n\n\n\n\n\n累積分布関数 \\(F_D(d)\\)\n\n\n\n\n\n需要 \\(D \\leq 250\\) である確率は，累積分布関数 \\(F_D(250)\\) で与えられる。\n\\[\nP(D \\leq 250) = F_D(250) = \\int_{100}^{250} f_D(d) dd = 0.75\n\\]\n需要 \\(D &gt; 250\\) である確率は \\(1 - F_D(250)\\) で与えられる。\n\\[\nP(D &gt; 250) = 1 - F_D(250) = 1 - \\int_{100}^{250} f_D(d) dd = 0.25\n\\]\n\n\\(D\\) が確率変数であるため，コストも確率変数となる。新聞売り子問題の目的は，コストの期待値を最小化することである。\nここで，コストの期待値を \\(g(S) = \\mathbb{E}[g(S, D)]\\) とする。\\(g(S, D)\\) は 式 5.1 で与えられるため，コストの期待値 \\(g(S)\\) は以下のように表される。\n\\[\\begin{align}\ng(S) &= \\mathbb{E}[g(S, D)] \\\\\n&= \\mathbb{E}[h (S - D)^+ + p (D - S)^+] \\\\\n&= \\mathbb{E}[h (S - D)^+] + \\mathbb{E}[p (D - S)^+] \\\\\n&= h \\mathbb{E}[(S - D)^+] + p \\mathbb{E}[(D - S)^+] \\\\\n\\end{align}\\]\nこの式により，コストの期待値 \\(g(S)\\) は，\\((S - D)^+\\) の期待値かける在庫超過費用 \\(h\\) と，\\((D - S)^+\\) の期待値かける在庫不足費用 \\(p\\) の和であることが分かる。\n\n\n\n\n\n\nノート期待値の線形性（Linearity of Expectation）\n\n\n\n\\(X\\) と \\(Y\\) を確率変数，\\(a\\) と \\(b\\) を定数とする。このとき，\n\\[\n\\mathbb{E}[X + Y] = \\mathbb{E}[X] + \\mathbb{E}[Y]\n\\]\n\\[\n\\mathbb{E}[aX + b] = a\\mathbb{E}[X] + b\n\\]\nが成り立つ。\n\n\n需要 \\(D\\) が連続型確率変数であるため，\\(\\mathbb{E}[(S - D)^+]\\) と \\(\\mathbb{E}[(D - S)^+]\\) は以下のように表される。 \\[\\begin{align}\n\\mathbb{E}[(S - D)^+]\n&= \\int_{0}^{\\infty} (S - d)^+ f_D(d) dd = \\int_{0}^{S} (S - d) f_D(d) dd \\\\\n\\mathbb{E}[(D - S)^+]\n&= \\int_{0}^{\\infty} (d - S)^+ f_D(d) dd = \\int_{S}^{\\infty} (d - S) f_D(d) dd\n\\end{align}\\]\n\n\n\n\n\n\nノート連続型確率変数の期待値\n\n\n\n\\(X\\) を連続型確率変数，\\(f_X(x)\\) を \\(X\\) の確率密度関数とする。このとき，\\(X\\) の期待値 \\(\\mathbb{E}[X]\\) は以下のように表される。\n\\[\n\\mathbb{E}[X] = \\int_{-\\infty}^{\\infty} x f_X(x) dx\n\\]\n\\(\\mathbb{E}[g(X)]\\) は以下のように表される。\n\\[\n\\mathbb{E}[g(X)] = \\int_{-\\infty}^{\\infty} g(x) f_X(x) dx\n\\]\n\n\nしたがって，コストの期待値 \\(g(S)\\) は以下のように表される。\n\\[\\begin{align}\ng(S) &= \\mathbb{E}[g(S, D)] \\\\\n&= h \\mathbb{E}[(S - D)^+] + p \\mathbb{E}[(D - S)^+] \\\\\n&= h \\int_{0}^{S} (S - d) f_D(d) dd + p \\int_{S}^{\\infty} (d - S) f_D(d) dd\n\\end{align}\\]\n\n例 5.4 在庫超過費用が \\(h = 10\\)，在庫不足費用が \\(p = 5\\) のとき，発注量 \\(S = 150\\) に対するコストの期待値 \\(g(150)\\) は以下のように求められる。\n\\[\ng(150) = 10 \\int_{0}^{150} (150 - d) f_D(d) dd + 5 \\int_{150}^{\\infty} (d - 150) f_D(d) dd\n\\]",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#最適化",
    "href": "inventory/newsvendor.html#最適化",
    "title": "5  新聞売り子問題",
    "section": "5.3 最適化",
    "text": "5.3 最適化\n以上の議論から，新聞売り子問題は，コストの期待値 \\(g(S)\\) を最小化する発注量 \\(S\\) を求める問題に帰着される。手順は以下の通りである。\n\n\\(g(S)\\) の1階微分を求める。\n\\(dg(S)/dS = 0\\) を解く。\n2階微分を求め，\\(g(S)\\) が凸関数であることを確認する。\n\n式 5.2 を用い，\\(g(S)\\) の1階微分は以下のように求める。\n\\[\\begin{align}\n\\frac{dg(S)}{dS} &= h \\int_{0}^{S} f_D(d) dd - p \\int_{S}^{\\infty} f_D(d) dd \\\\\n&= h F_D(S) - p (1 - F_D(S)) \\\\\n\\end{align}\\]\nよって，\\(dg(S)/dS = 0\\) から，\n\\[\\begin{align}\nh F_D(S) - p (1 - F_D(S)) &= 0 \\\\\nF_D(S) &= \\frac{p}{h + p}\n\\end{align}\\]\nになる。2 階微分は\n\\[\\begin{align}\n\\frac{d^2g(S)}{dS^2} &= h f_D(S) + p f_D(S) \\\\\n&= (h + p) f_D(S) &gt; 0\n\\end{align}\\]\nである。したがって，コスト関数 \\(g(S)\\) は凸関数であり，1 階微分が 0 になる点は最小値を与える。\n\n\n\n\n\n\nヒント\n\n\n\n\\(p &gt; 0\\)，\\(h &gt; 0\\)，\\(f_D(S) &gt; 0\\) より，\\((h + p) f_D(S) &gt; 0\\) が成り立つ。\n\n\nコスト関数 \\(g(S)\\) を最小化するための最適発注量 \\(S^*\\) は\n\\[\nS^* = F_D^{-1}\\left(\\frac{p}{h + p}\\right)\n\\]\nとなる。ここで，\\(F_D^{-1}\\) は需要 \\(D\\) の累積分布関数の逆関数である。\n\n\n\n\n\n\nノート逆関数（Inverse Function）\n\n\n\nある関数 \\(y = f(x)\\) に対し，次の条件を満たす関数 \\(x = f^{-1}(y)\\) を \\(f(x)\\) の逆関数と呼ぶ。\n\\[\nf(f^{-1}(y)) = y, \\quad f^{-1}(f(x)) = x\n\\]\n\n\n\n定理 5.1 新聞売り子問題における最適発注量 \\(S^*\\) は，\n\\[\nS^* = F_D^{-1}\\left(\\frac{p}{h + p}\\right)\n\\]\nで与えられる。\n\n\n5.3.1 正規分布の場合\n需要 \\(D\\) が正規分布 \\(N(\\mu, \\sigma^2)\\) に従うとき，新聞売り子問題の最適発注量 \\(S^*\\) は以下の式を満たす。\n\\[\nF_D(S^*) = \\Phi\\left(\\frac{S^* - \\mu}{\\sigma}\\right) = \\frac{p}{h + p}\n\\]\nここで，\n\\[\nz = \\Phi^{-1}\\left(\\frac{p}{h + p}\\right)\n\\]\nとおくと，\n\\[\nS^* = \\sigma z + \\mu\n\\]\nで与えられる。標準正規分布表を用いて \\(z\\) を調べることができる。\n\n\n\n\n\n\nノート標準正規分布（Standard Normal Distribution）\n\n\n\n平均 0，分散 1 の正規分布を標準正規分布（standard normal distribution）と呼ぶ。標準正規分布に従う確率変数を \\(Y\\) とすると，\\(Y \\sim N(0, 1)\\) と表される。標準正規分布の確率密度関数を \\(\\phi(z)\\)，累積分布関数を \\(\\Phi(z)\\) と表す。\n与えられた \\(X \\sim N(\\mu, \\sigma^2)\\) の累積分布関数 \\(F_X(x)\\) の値を求めるには，以下のように変換する。\n\\[\\begin{align}\nF_X(x) &= P(X \\leq x) \\\\\n&= P \\left( \\frac{X - \\mu}{\\sigma} \\leq \\frac{x - \\mu}{\\sigma} \\right) \\\\\\\\\n&= P\\left( Y \\leq \\frac{x - \\mu}{\\sigma} \\right) \\\\\\\\\n&= \\Phi \\left( \\frac{x - \\mu}{\\sigma} \\right)\n\\end{align}\\]\n与えられた \\(z\\) に対し，\\(\\Phi(z)\\) の値は標準正規分布表（standard normal table）を用いて調べることができる。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#臨界率",
    "href": "inventory/newsvendor.html#臨界率",
    "title": "5  新聞売り子問題",
    "section": "5.4 臨界率",
    "text": "5.4 臨界率\n以上の議論から，最適発注量 \\(S^*\\) は以下の式を満たす。\n\\[\nF_D(S) = P(D \\leq S) = \\frac{p}{h + p}\n\\]\nここで，\\(F_D(S) = P(D \\leq S)\\) は需要 \\(D\\) が発注量 \\(S\\) 以下である確率を表す。言い換えると，欠品が発生しない確率を表す。この確率のことはサービスレベル（service level）と呼ぶ。定理 5.1 は，サービスレベルを \\(p/(h+p)\\) に等しくする発注量 \\(S\\) が最適であることを示している。\nこの \\(p/(h+p)\\) は臨界率（critical ratio）と呼ばれる。\n\n注釈 5.1. \n\n在庫不足費用 \\(p\\) の増加に伴い，サービスレベル \\(p/(h+p)\\) は増加し，最適発注量 \\(S^* = F_D^{-1}(p/(h+p))\\) も増加する。\n在庫超過費用 \\(h\\) の増加に伴い，サービスレベル \\(p/(h+p)\\) は減少し，最適発注量 \\(S^* = F_D^{-1}(p/(h+p))\\) も減少する。\n直感的に，在庫不足費用が増加すると，欠品を避けるために発注量が増加し，サービスレベルも上昇する。一方，在庫超過費用が増加すると，過剰在庫を避けるために発注量が減少し，サービスレベルも低下する。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#例題",
    "href": "inventory/newsvendor.html#例題",
    "title": "5  新聞売り子問題",
    "section": "5.5 例題",
    "text": "5.5 例題\n\n例 5.5 需要 \\(D\\) が正規分布 \\(N(100, 25)\\) に従う新聞売り子問題を考える。在庫超過費用が \\(h = 10\\)，在庫不足費用が \\(p = 40\\) のとき，最適発注量 \\(S^*\\) を求める。\n定理 5.1 より，\\(S^*\\) は以下の式で与えられる。\n\\[\nS^* = F_D^{-1}\\left(\\frac{p}{h + p}\\right) = F_D^{-1}\\left(\\frac{40}{10 + 40}\\right) = F_D^{-1}\\left(0.8\\right)\n\\]\n言い換えると，\\(F_D(S^*) = 0.8\\) を満たす \\(S^*\\) を求めればよい。これを図で表すと，面積が 0.8 になるような \\(S^*\\) を求めることに相当する。\n\n\nコード\nimport matplotlib.pyplot as plt\nimport numpy as np\nfrom scipy.stats import norm\n\n# 正規分布のパラメータ\nmu = 100\nsigma = 5\n\n# 需要の範囲\nd = np.linspace(mu - 4 * sigma, mu + 4 * sigma, 1000)\nS_star = norm.ppf(0.8, loc=mu, scale=sigma)\n\n# plot the normal distribution\nplt.plot(d, norm.pdf(d, mu, sigma))\nplt.fill_between(\n    d,\n    0,\n    norm.pdf(d, mu, sigma),\n    where=(d &lt;= S_star),\n    color=\"skyblue\",\n    alpha=0.5,\n    label=\"F(S*)\",\n)\nplt.xlabel(\"Demand\")\nplt.ylabel(\"Probability Density\")\nplt.axvline(mu, color=\"r\", linestyle=\"--\", label=\"mu\")\nplt.axvline(S_star, color=\"g\", linestyle=\"--\", label=\"S*\")\nplt.ylim(0, 0.09)\nplt.legend()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n下では，Excel，Python，標準正規分布表を用いて \\(S^*\\) を求める方法を示す。\n\n5.5.1 標準正規分布表\n標準正規分布表 を調べると，\\(\\Phi(z) = 0.8\\) のとき，\\(z\\) は約 0.84 である。したがって，\\(S^*\\) は\n\\[\nS^* = z \\sigma + \\mu \\approx 0.84 \\times 5 + 100 = 104.2\n\\]\nとなる。\n\n\n5.5.2 Excel\nExcel では，NORM.INV(確率,平均,標準偏差) 関数を用いて \\(F_D^{-1}(0.8)\\) を求めることができる。\n=NORM.INV(0.8, 100, 5)\n\n\n5.5.3 Python\nPython では，SciPy ライブラリの ppf() 関数を用いて，逆関数を求めることができる。\n\nfrom scipy.stats import norm\n\n# 正規分布のパラメータ\nmu = 100\nsigma = 5\n\n# 在庫超過費用と在庫不足費用\nh = 10\np = 40\n\n# 臨界率\ncritical_ratio = p / (h + p)\n\n# 最適発注量\nS_star = norm.ppf(critical_ratio, loc=mu, scale=sigma)\nprint(f\"Optimal order quantity S*: {S_star:.2f}\")\n\nOptimal order quantity S*: 104.21",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#再定式化",
    "href": "inventory/newsvendor.html#再定式化",
    "title": "5  新聞売り子問題",
    "section": "5.6 再定式化",
    "text": "5.6 再定式化\n新聞 1 部の仕入れ価格を \\(c\\)，販売価格を \\(r\\)，残存価額を \\(v\\)，欠品費用を \\(p\\)，保管費用を \\(h\\) とする。ここで，以下の条件を満たすとする。\n\n\\(r &gt; c\\). 販売価格は仕入れ価格より高い。\n\\(r &gt; v\\). 販売価格は残存価値より高い。\n\n新聞売り子が \\(S\\) 部の新聞を仕入れ，需要 \\(D\\) が \\(d\\) であったとする。このとき，新聞売り子の利益 \\(\\pi(S, d)\\) は以下のように表される。\n\n5.6.1 コスト関数\n\\[\\begin{align}\n\\pi(S, d) & = r \\min\\{d, S\\} - cS + v \\max\\{0, S - d\\} \\\\\n& \\quad - h \\max\\{0, S - d\\} - p \\max\\{0, d - S\\}\n\\end{align}\\]\n第一項は販売利益，第二項は仕入れコスト，第三項は残存価値，第四項は保管コスト，第五項は欠品コストである。\n以下は，\\(\\max\\{0, x\\} = x^+\\) を用いて書き換えた形である。整理すると，利益は以下のように表される。\n\\[\n\\pi(S, d) = r \\min\\{d, S\\} - cS + (v - h) (S - d)^+ - p (d - S)^+\n\\]\n第一項を以下のように書き換えることができる。\n\\[\nr \\min\\{d, S\\} = r d - r (d - S)^+\n\\]\n\n\n\n\n\n\nノート\n\n\n\n\n\\(d &lt; S\\) の場合，\\(r \\min\\{d, S\\} = r d\\) となる。\n\\(d &gt;= S\\) の場合，\\(r \\min\\{d, S\\} = r d - r(d - S) = r S\\) となる。\n\n\n\nしたがって，利益は以下のように書き換えられる。\n\\[\n\\pi(S, d) = r d - cS + (v- h) (S - d)^+ - (p + r) (d - S)^+\n\\]\n利益の最大化は，コストの最小化に帰着される。したがって，コスト関数 \\(g(S, d) = -\\pi(S, d)\\) は以下のように表される。\n\\[\ng(S, d) = cS - rd + (h - v) (S - d)^+ + (p + r) (d - S)^+\n\\]\n\\(D\\) が確率変数であるため，コストの期待値 \\(g(S)\\) は以下のように表される。\n\\[\\begin{align}\ng(S) &= \\mathbb{E}[g(S, D)] \\\\\n&= \\int_{0}^{\\infty} g(S, d) f_D(d) dd \\\\\n&= cS - r\\mathbb{E}[D] + (h - v) \\mathbb{E}[(S - D)^+] + (p + r) \\mathbb{E}[(D - S)^+] \\\\\n&= c S - r \\mu + (h - v)  \\int_{0}^{\\infty}(S - d)^+ f_D(d) dd + (p + r) \\int_{0}^{\\infty} (d - S)^+ f_D(d) dd \\\\\n&= c S - r \\mu + (h - v) \\int_{0}^{S} (S - d) f_D(d) dd + (p + r) \\int_{S}^{\\infty} (d - S) f_D(d) dd\n\\end{align}\\]\n\n\n5.6.2 最適化\n\\(g(S)\\) の1階微分は以下のように求める。\n\\[\\begin{align}\n\\frac{dg(S)}{dS} &= c + (h - v) F_D(S) - (p + r) (1 - F_D(S)) \\\\\n\\end{align}\\]\nよって，\\(dg(S)/dS = 0\\) から，\n\\[\\begin{align}\nc + (h - v) F_D(S) - (p + r) (1 - F_D(S)) &= 0 \\\\\nF_D(S) &= \\frac{p + r - c}{h + p + r - v}\n\\end{align}\\]\nになる。2 階微分は\n\\[\\begin{align}\n\\frac{d^2g(S)}{dS^2} &= (h - v) f_D(S) + (p + r) f_D(S) \\\\\n&= (h - v + p + r) f_D(S)\n\\end{align}\\]\nである。したがって，コスト関数 \\(g(S)\\) は凸関数であり，1 階微分が 0 になる点は最小値を与える。\nコスト関数 \\(g(S)\\) を最小化するための最適発注量 \\(S^*\\) は\n\\[\nS^* = F_D^{-1}\\left(\\frac{p + r - c}{h + p + r - v}\\right)\n\\] となる。ここで，\\(F_D^{-1}\\) は需要 \\(D\\) の累積分布関数の逆関数である。\n新聞売り子問題において，より一般的に，在庫超過費用（overage cost）と 在庫不足費用（underage cost）を考慮する。\n\\[\nC_o = h + c - v, \\quad C_u = p + r - c\n\\]\n\n\n5.6.3 臨界率\n在庫超過費用 \\(C_o\\) は，在庫が余ったときのコストである。1 部の在庫超過に対し，保管コストと仕入れコストが発生するが，残存価額が得られないため，\\(C_o = h + c - v\\) となる。\n在庫不足費用 \\(C_u\\) は，在庫が不足したときのコストである。1 部の在庫不足に対し，欠品コスト \\(p\\) と失われた販売機会の利益 \\(r - c\\) が発生するため，\\(C_u = p + r - c\\) となる。\n従って，\n\\[\\begin{align*}\nS^* &= F_D^{-1}\\left(\\frac{p + r - c}{h + p + r - v}\\right)\\\\\n&= F_D^{-1}\\left(\\frac{C_u}{C_o + C_u}\\right)\n\\end{align*}\\]\nが得られる。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#初期在庫を考慮した新聞売り子問題",
    "href": "inventory/newsvendor.html#初期在庫を考慮した新聞売り子問題",
    "title": "5  新聞売り子問題",
    "section": "5.7 初期在庫を考慮した新聞売り子問題*",
    "text": "5.7 初期在庫を考慮した新聞売り子問題*\n新聞売り子の初期在庫を \\(I\\) とする。\\(I \\leq S^*\\)の場合，最適発注量は \\(S^* - I\\) となる。すなわち，在庫量を \\(S^*\\) にすればよい。\nまた，\\(g(S)\\) は凸関数であるため，\\(I &gt; S^*\\) の場合，何も発注しないことが最適である。\nしたがって，最適発注量は\n\\[\nQ =\n\\begin{cases}\nS^* - I, & \\text{if } I \\le S^*, \\\\[6pt]\n0, & \\text{if } I &gt; S^* .\n\\end{cases}\n\\]\nとなる。\nこのような発注方式を Base Stock Policy (BSP) と呼ぶ。BSP は，各期間の在庫量を観測し，在庫量が \\(S^*\\) に引き上げられるように発注する方式である。新聞売り子問題において，BSP は最適な方策であると知られている。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#文献案内",
    "href": "inventory/newsvendor.html#文献案内",
    "title": "5  新聞売り子問題",
    "section": "5.8 文献案内",
    "text": "5.8 文献案内\nArrow, Harris, と Marschak (1951) は，新聞売り子問題を初めて定式化した。\nScarf (1959) の論文では，\\((s, S)\\) 方策が発注費用を考慮した複数期間の新聞売り子問題において最適であることを示している。\n実際には，需要の分布が不明であることが多い。Huber ほか (2019) は，データ駆動新聞売り子問題（Data-Driven Newsvendor Problem）に関する研究が行われている。\nQin ほか (2011) は，新聞売り子問題に関する研究をレビューした。",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/newsvendor.html#練習問題",
    "href": "inventory/newsvendor.html#練習問題",
    "title": "5  新聞売り子問題",
    "section": "5.9 練習問題",
    "text": "5.9 練習問題\n\n練習 5.1 ある弁当屋では，1 個 500 円で弁当を仕入れ，1 個 800 円で販売している。売れ残った弁当を廃棄する場合，1 個当たり 10 円の廃棄費用がかかる。 弁当の需要 \\(D\\) は，正規分布 \\(N(50, 8^2)\\) に従うとする。このとき，最適な弁当の発注量を求めよ。\n\n\n解答 5.1. 弁当 1 個当たりの在庫超過費用 \\(h\\)，在庫不足費用 \\(p\\) は以下のように求められる。 \\[\nh = 10 + 500 = 510, \\quad p = 800 - 500 = 300\n\\]\nしたがって，\\(S^*\\) は以下のように求められる。\n\\[\nS^* = F_D^{-1}\\left(\\frac{p}{h + p}\\right) = F_D^{-1}\\left(\\frac{300}{510 + 300}\\right) \\approx F_D^{-1}\\left(0.37\\right)\n\\]\n標準正規分布表を調べると，\\(\\Phi(z) = 0.37\\) のとき，\\(z\\) は約 -0.33 である。したがって，\\(S^*\\) は\n\\[\nS^* = -0.33 \\times \\sigma + \\mu = -0.33 \\times 8 + 50 \\approx 47.36\n\\]\nとなる。\nPython を用いて計算すると，以下のようになる。\n\n\nコード\nfrom scipy.stats import norm\n\n# 正規分布のパラメータ\nmu = 50\nsigma = 8\n# 在庫超過費用と在庫不足費用\nh = 510\np = 300\n# 臨界率\ncritical_ratio = p / (h + p)\n# 最適発注量\nS_star = norm.ppf(critical_ratio, loc=mu, scale=sigma)\nprint(f\"Optimal order quantity S*: {S_star:.4f}\")\n\n\nOptimal order quantity S*: 47.3530\n\n\n\n\n\n\n\nArrow, Kenneth J, Theodore Harris, と Jacob Marschak. 1951. 「Optimal Inventory Policy」. Econometrica 19 (3): 250.\n\n\nHuber, Jakob, Sebastian Müller, Moritz Fleischmann, と Heiner Stuckenschmidt. 2019. 「A data-driven newsvendor problem: From data to decision」. Eur. J. Oper. Res. 278 (3): 904–15.\n\n\nQin, Yan, Ruoxuan Wang, Asoo J Vakharia, Yuwen Chen, と Michelle M H Seref. 2011. 「The newsvendor problem: Review and directions for future research」. Eur. J. Oper. Res. 213 (2): 361–74.\n\n\nScarf, Herbert. 1959. 「The optimality of (S, s) policies in the dynamic inventory problem」.",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>新聞売り子問題</span>"
    ]
  },
  {
    "objectID": "inventory/summary.html",
    "href": "inventory/summary.html",
    "title": "6  まとめ",
    "section": "",
    "text": "在庫管理の目的は，発注量と発注時期を決定し，顧客の需要を満たしつつ，コストを最小化することである．\n科学的在庫管理では，在庫モデルを定式化し，発注量と発注時期を決定する．\n在庫方策は，在庫の状況に応じて，発注量と発注時期を決定するルールである．\\((s, S)\\) 方策，\\((r, Q)\\) 方策，BSP 方策などがある．\n安全在庫の章では，コストを最小化するのではなく，サービスレベルを満たすための在庫方策を決定する方法を学んだ．\n\n紹介した在庫モデルを分類すると，次の表のようになる．\n\n\n\nモデル名\n分類\n\n\n\n\nEOQ モデル\n決定論的連続観測モデル\n\n\n安全在庫\n確率的連続観測モデル\n\n\nWagner-Whitin モデル\n多期間決定論的周期観測モデル\n\n\n新聞売り子問題\n単一期間確率的周期観測モデル",
    "crumbs": [
      "在庫モデル",
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>まとめ</span>"
    ]
  }
]